<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
    <title>COVID-19</title>
</head>
<body>
    <div class="container-fluid p-5 bg-success text-center my-3">
        <h1>COVID-19 INDIA TRACKER</h1>
        <h4>
            OPEN SOURCE PROJECT FOR TRACKING COVID-19 CASES IN INDIA
        </h4>
    </div>
    <div class="container my-5">
        <div class="row text-center">

            <div class="col-3 text-warning">
                <h4>CONFIRMED</h4>
                <p id="confirmed"></p>
             </div>

             <div class="col-3 text-info">
             <h4>ACTIVE</h4>
             <p id="active"></p>
              </div>

            <div class="col-3 text-success">
            <h4>RECOVERED</h4>
            <p id="recovered"></p>
            </div>
        
            <div class="col-3 text-danger">
            <h4>DEATHS</h4>
            <p id="deaths"></p>
            </div>

        </div>

        <canvas id="myChart"></canvas>

    </div>

</body>

<script>
    $(document).ready(function(){
         const url="https://api.covid19india.org/data.json";
         $.getJSON(url,function(data){
             console.log(data);

            var total_active,total_recovered,total_deaths,total_confirmed;

            var state=[];
            var confirmed=[];
            var recovered=[];
            var deaths=[];

            $.each(data.statewise,function(id,obj){
                state.push(obj.state)
                confirmed.push(obj.confirmed)
                recovered.push(obj.recovered)
                deaths.push(obj,deaths)
            })
            
            state.shift();
            confirmed.shift();
            recovered.shift();
            deaths.shift();

            console.log(state);

            total_active=data.statewise[0].active;
            total_confirmed=data.statewise[0].confirmed;
            total_recovered=data.statewise[0].recovered;
            total_deaths=data.statewise[0].deaths;

            $("#active").append(total_active);
            $("#confirmed").append(total_confirmed);
            $("#deaths").append(total_deaths);
            $("#recovered").append(total_recovered);
   
             var myChart=document.getElementById("myChart").getContext('2d')
             var chart=new Chart(myChart,{
                 type:'bar',
                 data:{
                     labels:state,
                     datasets:[
                         {
                             label:"Confirmed Cases",
                             data:confirmed,
                             backgroundColor:"yellow",
                             minBarLength:100
                         },
                            {
                             label:"Recovered Cases",
                             data:confirmed,
                             backgroundColor:"green",
                             minBarLength:100
                            },
                            {
                             label:"Death Cases",
                             data:confirmed,
                             backgroundColor:"red",
                             minBarLength:100
                            }
                     ]
                 },
                 options:{}

             })


         });

    })
</script>
</html>

